# ğŸ’¾ Tritones Backend âœ¨

Backend package for **The UCSD Tritones'** website developed in collaboration with [CSES](https://csesucsd.com/)-[Webdev](https://www.linkedin.com/company/cses-webdev/) during Summer 2023.

This Django-based API powers the websiteâ€™s data layer, handling member info, photos, Spotify track data, and contact form submissions.

## ğŸ§° Prerequisites

* Python: 3.11
* Complete the [Django tutorial](https://docs.djangoproject.com/en/4.2/intro/tutorial01/).
* SQLite3 (included by default in most Python installs)
* Optional: [Conda](https://docs.conda.io/en/latest/) or [Miniconda](https://www.anaconda.com/docs/getting-started/miniconda/main) for virtual environment management

Itâ€™s strongly recommended to create a virtual environment to isolate this projectâ€™s dependencies.
Examples are shown below for both Conda and `venv`.

## Knowledge Prerequisites

## ğŸ—ƒï¸ Project Structure
The project follows a standard **[Django](https://www.djangoproject.com/) application layout**, with a root configuration folder (`tritonesbackend`) and an app folder (`tritones`) that contains the actual models, views, and templates. This project was built using [Django v4.2.5](https://docs.djangoproject.com/en/4.2/).

```bash
Tritones-backend/
â”œâ”€â”€ tritones/                   # Core Django app for the website
â”‚   â”œâ”€â”€ migrations/             # Database migration files (auto-created by Django)
â”‚   â”œâ”€â”€ templates/              # HTML templates (e.g., hello.html)
â”‚   â”œâ”€â”€ __init__.py             # Marks package as a module
â”‚   â”œâ”€â”€ admin.py                # Django admin interface configuration
â”‚   â”œâ”€â”€ apps.py                 # App registration
â”‚   â”œâ”€â”€ config.py               # App-level configuration (Spotipy)
â”‚   â”œâ”€â”€ forms.py                # Django form definitions (Contact form)
â”‚   â”œâ”€â”€ models.py               # Database models (e.g. Member, Photo, ContactSubmission, SpotifyTrack)
â”‚   â”œâ”€â”€ serializers.py          # Model serializers for data exchange
â”‚   â”œâ”€â”€ tests.py                # Test cases
â”‚   â”œâ”€â”€ urls.py                 # App-specific URL routes
â”‚   â””â”€â”€ views.py                # REST API functions and page view logic
â”‚
â”œâ”€â”€ tritonesbackend/            # Project configuration folder (auto-generated by Django)
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ asgi.py                 # ASGI entry point
â”‚   â”œâ”€â”€ settings.py             # Global project settings
â”‚   â”œâ”€â”€ urls.py                 # Root URL routing
â”‚   â””â”€â”€ wsgi.py                 # WSGI entry point for deployment
â”‚
â”œâ”€â”€ .gitignore
â”œâ”€â”€ README.md
â”œâ”€â”€ manage.py                   # Djangoâ€™s main command-line utility
â”œâ”€â”€ requirements.txt            # Python dependencies
â””â”€â”€ tritones.sqlite3            # Local SQLite database
```

### ğŸ”§ Notes

* `settings.py` contains sensitive values such as `SECRET_KEY`, `DEBUG`, and email credentials.
These should be stored securely (e.g. as **environment variables**) before deployment.

* Most of the files in `/tritonesbackend`, `/migrations`, and any `__pycache__` directories are **auto-generated by Django** when the project and app were first created.

* Custom logic lives primarily in `/tritones` â€” especially `models.py`, `views.py`, and `serializers.py`.

## âš™ï¸ Setup & Run Instructions

**1. Create a virtual environment (Python 3.11)**
  Conda example:
  ```bash
  conda create -n tritones python=3.11
  conda activate tritones
  ```

  **venv alternative:**
  ```bash
  python -m venv tritones
  source tritones/bin/activate  # (on Windows: tritones\Scripts\activate)
  ```

**2. Clone the repository**
  ```bash
  git clone https://github.com/therxtr/Tritones-backend.git
  cd Tritones-backend
  ```

**3. Install dependencies**
  ```bash
  pip install -r requirements.txt
  ```

**4. Switch to the dev branch** (and create your own feature branch)
  ```bash
  git checkout dev
  git checkout -b my-feature-branch
  ```

**5. Run the backend server**
  ```bash
  python manage.py runserver
  ```

  The development server will start at:
  
  ğŸ‘‰ `http://127.0.0.1:8000/`

**6. Access the Django Admin Panel**
  Visit:
  
  ğŸ‘‰ `http://127.0.0.1:8000/admin`
  
  Log in using the admin credentials (ask project lead for access).

  From here, you can view and manage:
  * Spotify tracks
  * Photos
  * Members
  * Application users

## ğŸŒ¿ Branching Strategy

To maintain a clean and stable codebase:
* `main` â†’ production-ready and stable
* `dev` â†’ integration branch for new features
* **feature branches** â†’ branch off from `dev` for new additions or fixes

Typical flow:
```feature â†’ dev â†’ main```

Commit and test small units in `dev` before merging into `main`.
Hotfixes may occasionally need to be patched directly into `main` â€” use discretion.

### ğŸ§  Optional: Database Exploration

To interact with the SQLite database, I'd recommend installing [DBeaver Community](https://dbeaver.io/). Other options include the [sqlite3 command line tool](https://sqlite.org/cli.html) and the [sqlite3 python library](https://docs.python.org/3/library/sqlite3.html) (this last one may come in handy for automating DB updates).

**DBeaver Instructions:**
1. Open DBeaver â†’ Connect to Database â†’ SQLite

2. Select the local `tritones.sqlite3` file in your backend project directory

3. Explore and verify data tables easily through the UI
