# 💾 Tritones Backend ✨

Backend package for **The UCSD Tritones'** website developed in collaboration with [CSES](https://csesucsd.com/)-[Webdev](https://www.linkedin.com/company/cses-webdev/) during Summer 2023.

This Django-based API powers the website’s data layer, handling member info, photos, Spotify track data, and contact form submissions.

## 🧰 Prerequisites

* Python: 3.11
* Complete the [Django tutorial](https://docs.djangoproject.com/en/4.2/intro/tutorial01/).
* SQLite3 (included by default in most Python installs)
* Optional: [Conda](https://docs.conda.io/en/latest/) or [Miniconda](https://www.anaconda.com/docs/getting-started/miniconda/main) for virtual environment management

It’s strongly recommended to create a virtual environment to isolate this project’s dependencies.
Examples are shown below for both Conda and `venv`.

## Knowledge Prerequisites

## 🗃️ Project Structure
The project follows a standard **[Django](https://www.djangoproject.com/) application layout**, with a root configuration folder (`tritonesbackend`) and an app folder (`tritones`) that contains the actual models, views, and templates. This project was built using [Django v4.2.5](https://docs.djangoproject.com/en/4.2/).

```bash
Tritones-backend/
├── tritones/                   # Core Django app for the website
│   ├── migrations/             # Database migration files (auto-created by Django)
│   ├── templates/              # HTML templates (e.g., hello.html)
│   ├── __init__.py             # Marks package as a module
│   ├── admin.py                # Django admin interface configuration
│   ├── apps.py                 # App registration
│   ├── config.py               # App-level configuration (Spotipy)
│   ├── forms.py                # Django form definitions (Contact form)
│   ├── models.py               # Database models (e.g. Member, Photo, ContactSubmission, SpotifyTrack)
│   ├── serializers.py          # Model serializers for data exchange
│   ├── tests.py                # Test cases
│   ├── urls.py                 # App-specific URL routes
│   └── views.py                # REST API functions and page view logic
│
├── tritonesbackend/            # Project configuration folder (auto-generated by Django)
│   ├── __init__.py
│   ├── asgi.py                 # ASGI entry point
│   ├── settings.py             # Global project settings
│   ├── urls.py                 # Root URL routing
│   └── wsgi.py                 # WSGI entry point for deployment
│
├── .gitignore
├── README.md
├── manage.py                   # Django’s main command-line utility
├── requirements.txt            # Python dependencies
└── tritones.sqlite3            # Local SQLite database
```

### 🔧 Notes

* `settings.py` contains sensitive values such as `SECRET_KEY`, `DEBUG`, and email credentials.
These should be stored securely (e.g. as **environment variables**) before deployment.

* Most of the files in `/tritonesbackend`, `/migrations`, and any `__pycache__` directories are **auto-generated by Django** when the project and app were first created.

* Custom logic lives primarily in `/tritones` — especially `models.py`, `views.py`, and `serializers.py`.

## ⚙️ Setup & Run Instructions

**1. Create a virtual environment (Python 3.11)**
  Conda example:
  ```bash
  conda create -n tritones python=3.11
  conda activate tritones
  ```

  **venv alternative:**
  ```bash
  python -m venv tritones
  source tritones/bin/activate  # (on Windows: tritones\Scripts\activate)
  ```

**2. Clone the repository**
  ```bash
  git clone https://github.com/therxtr/Tritones-backend.git
  cd Tritones-backend
  ```

**3. Install dependencies**
  ```bash
  pip install -r requirements.txt
  ```

**4. Switch to the dev branch** (and create your own feature branch)
  ```bash
  git checkout dev
  git checkout -b my-feature-branch
  ```

**5. Run the backend server**
  ```bash
  python manage.py runserver
  ```

  The development server will start at:
  
  👉 `http://127.0.0.1:8000/`

**6. Access the Django Admin Panel**
  Visit:
  
  👉 `http://127.0.0.1:8000/admin`
  
  Log in using the admin credentials (ask project lead for access).

  From here, you can view and manage:
  * Spotify tracks
  * Photos
  * Members
  * Application users

## 🌿 Branching Strategy

To maintain a clean and stable codebase:
* `main` → production-ready and stable
* `dev` → integration branch for new features
* **feature branches** → branch off from `dev` for new additions or fixes

Typical flow:
```feature → dev → main```

Commit and test small units in `dev` before merging into `main`.
Hotfixes may occasionally need to be patched directly into `main` — use discretion.

### 🧠 Optional: Database Exploration

To interact with the SQLite database, I'd recommend installing [DBeaver Community](https://dbeaver.io/). Other options include the [sqlite3 command line tool](https://sqlite.org/cli.html) and the [sqlite3 python library](https://docs.python.org/3/library/sqlite3.html) (this last one may come in handy for automating DB updates).

**DBeaver Instructions:**
1. Open DBeaver → Connect to Database → SQLite

2. Select the local `tritones.sqlite3` file in your backend project directory

3. Explore and verify data tables easily through the UI
